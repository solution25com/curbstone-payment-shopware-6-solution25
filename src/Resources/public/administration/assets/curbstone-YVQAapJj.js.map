{"version":3,"file":"curbstone-YVQAapJj.js","sources":["../../../app/administration/src/module/sw-settings-curbstone/page/sw-settings-curbstone-list/sw-settings-credova-list.html.twig","../../../app/administration/src/module/sw-settings-curbstone/components/sw-settings-curbstone-form/sw-settings-curbstone-form.html.twig","../../../app/administration/src/module/sw-settings-curbstone/components/sw-settings-curbstone-form/index.js","../../../app/administration/src/module/sw-settings-curbstone/page/sw-settings-curbstone-list/index.js","../../../app/administration/src/module/sw-settings-curbstone/index.js"],"sourcesContent":["<sw-page headerBorderColor=\"#9AA8B5\">\n    <template #smart-bar-header>\n        <div class=\"sw-page__smart-bar-header\">\n            <h2>{{ $tc('Curbstone settings') }}</h2>\n            <mt-icon\n                    name=\"regular-chevron-right-xs\"\n                    size=\"12px\"\n            />\n            <h2>{{ $tc('Curbstone') }}</h2>\n        </div>\n    </template>\n    <template #smart-bar-actions>\n        <sw-button\n                :disabled=\"$refs.curbstoneForm && $refs.curbstoneForm.isLoading\"\n                :loading=\"$refs.curbstoneForm && $refs.curbstoneForm.isLoading\"\n                @click=\"onSave\"\n                variant=\"secondary\"\n        >\n            {{ $tc('Save Configs') }}\n        </sw-button>\n    </template>\n\n    <template #content>\n        <sw-settings-curbstone-form ref=\"form\" @saved=\"onSaved\"/>\n    </template>\n</sw-page>\n","<div class=\"sw-settings-curbstone-form\">\n    <mt-card style=\"margin-top: 20px;\" title=\"Sales channel\">\n        <sw-sales-channel-switch\n                ref=\"salesChannelSwitch\"\n                :sales-channel-id=\"salesChannelId\"\n                label=\"Select sales channel\"\n                @change-sales-channel-id=\"onSalesChannelChanged\"\n        />\n    </mt-card>\n\n    <mt-card :isLoading=\"isLoading\" title=\"Configuration\">\n        <div class=\"grid grid-cols-1 gap-20\">\n            <sw-switch-field\n                    label=\"Sandbox mode\"\n                    help-text=\"Use Curbstone sandbox endpoints (c3sbx.net). Switch off for production (c3dsi.net).\"\n                    v-model:value=\"form['Curbstone.config.sandbox']\"\n            />\n\n            <sw-single-select\n                    label=\"Checkout Integration\"\n                    help-text=\"\"\n                    v-model:value=\"form['Curbstone.config.checkoutIntegration']\"\n                    :options=\"checkoutIntegrationOptions\"\n                    placeholder=\"DSI\"\n            />\n\n            <sw-text-field\n                    label=\"Merchant DSI Key (MFDSIK)\"\n                    v-model:value=\"form['Curbstone.config.dsiKey']\"\n                    :maxlength=\"256\"\n                    placeholder=\"Your Curbstone MFDSIK\"\n            />\n\n            <sw-text-field\n                    label=\"Customer ID (MFCUST)\"\n                    v-model:value=\"form['Curbstone.config.customerId']\"\n                    :maxlength=\"64\"\n                    placeholder=\"Your Curbstone MFCUST\"\n            />\n\n            <sw-text-field\n                    label=\"Merchant Code (MFMRCH)\"\n                    v-model:value=\"form['Curbstone.config.merchantCode']\"\n                    :maxlength=\"64\"\n                    placeholder=\"Your Curbstone MFMRCH\"\n            />\n        </div>\n    </mt-card>\n</div>\n","import template from \"./sw-settings-curbstone-form.html.twig\";\nimport \"./sw-settings-curbstone-form.scss\";\n\nconst { Component, Mixin } = Shopware;\n\nComponent.register(\"sw-settings-curbstone-form\", {\n    template,\n    inject: [\"systemConfigApiService\"],\n    mixins: [Mixin.getByName(\"notification\")],\n\n    data() {\n        return {\n            isLoading: false,\n            salesChannelId: null,\n            form: {\n                \"Curbstone.config.enabled\": false,\n                \"Curbstone.config.sandbox\": true,\n                \"Curbstone.config.dsiKey\": \"\",\n                \"Curbstone.config.customerId\": \"\",\n                \"Curbstone.config.merchantCode\": \"\",\n                \"Curbstone.config.authCaptureFlow\": \"auth_only\",\n                \"Curbstone.config.plpMode\": \"embedded\",\n                \"Curbstone.config.requireCaptcha\": true,\n                \"Curbstone.config.checkoutIntegration\": \"plp\",\n            }\n        };\n    },\n\n    computed: {\n        configDomain() {\n            return \"Curbstone.config\";\n        },\n        authFlowOptions() {\n            return [\n                { value: \"auth_only\",    label: \"Auth only\" },\n                { value: \"auth_capture\", label: \"Auth & Capture\" }\n            ];\n        },\n        plpModeOptions() {\n            return [\n                { value: \"embedded\", label: \"Embedded (iFrame)\" },\n                { value: \"redirect\", label: \"Redirect (full page)\" }\n            ];\n            },\n            checkoutIntegrationOptions(){\n                return[\n                    { value: \"plp\", label: \"PLP\" },\n                    { value: \"dsi\", label: \"DSI\" }\n                ];\n            }\n    },\n\n    created() {\n        this.salesChannelId = null;\n        this.loadConfig();\n    },\n\n    methods: {\n        async onSalesChannelChanged(salesChannelId) {\n            this.salesChannelId = salesChannelId || null;\n            await this.loadConfig();\n        },\n\n        async loadConfig() {\n            this.isLoading = true;\n            try {\n                const values = await this.systemConfigApiService.getValues(\n                    this.configDomain,\n                    this.salesChannelId\n                );\n\n                this.form[\"Curbstone.config.enabled\"] =\n                    values[\"Curbstone.config.enabled\"] ?? false;\n\n                this.form[\"Curbstone.config.sandbox\"] =\n                    values[\"Curbstone.config.sandbox\"] ?? true;\n\n                this.form[\"Curbstone.config.dsiKey\"] =\n                    values[\"Curbstone.config.dsiKey\"] ?? \"\";\n\n                this.form[\"Curbstone.config.customerId\"] =\n                    values[\"Curbstone.config.customerId\"] ?? \"\";\n\n                this.form[\"Curbstone.config.merchantCode\"] =\n                    values[\"Curbstone.config.merchantCode\"] ?? \"\";\n\n                this.form[\"Curbstone.config.authCaptureFlow\"] =\n                    values[\"Curbstone.config.authCaptureFlow\"] ?? \"auth_only\";\n\n                this.form[\"Curbstone.config.plpMode\"] =\n                    values[\"Curbstone.config.plpMode\"] ?? \"embedded\";\n\n                this.form[\"Curbstone.config.requireCaptcha\"] =\n                    values[\"Curbstone.config.requireCaptcha\"] ?? true;\n                this.form[\"Curbstone.config.checkoutIntegration\"] =\n                    values[\"Curbstone.config.checkoutIntegration\"] ?? \"plp\";\n\n            } catch (e) {\n                this.createNotificationError({\n                    title: \"Curbstone\",\n                    message: \"Failed to load configuration.\"\n                });\n            } finally {\n                this.isLoading = false;\n            }\n        },\n\n        async saveConfig() {\n            if (this.isLoading) return false;\n            this.isLoading = true;\n            try {\n                await this.systemConfigApiService.saveValues(\n                    {\n                        \"Curbstone.config.enabled\": this.form[\"Curbstone.config.enabled\"],\n                        \"Curbstone.config.sandbox\": this.form[\"Curbstone.config.sandbox\"],\n                        \"Curbstone.config.dsiKey\": this.form[\"Curbstone.config.dsiKey\"],\n                        \"Curbstone.config.customerId\": this.form[\"Curbstone.config.customerId\"],\n                        \"Curbstone.config.merchantCode\": this.form[\"Curbstone.config.merchantCode\"],\n                        \"Curbstone.config.authCaptureFlow\": this.form[\"Curbstone.config.authCaptureFlow\"],\n                        \"Curbstone.config.plpMode\": this.form[\"Curbstone.config.plpMode\"],\n                        \"Curbstone.config.requireCaptcha\": this.form[\"Curbstone.config.requireCaptcha\"],\n                        \"Curbstone.config.checkoutIntegration\": this.form[\"Curbstone.config.checkoutIntegration\"]\n                    },\n                    this.salesChannelId\n                );\n\n                this.createNotificationSuccess({\n                    title: \"Curbstone\",\n                    message: \"Configuration saved.\"\n                });\n                return true;\n            } catch (e) {\n                this.createNotificationError({\n                    title: \"Curbstone\",\n                    message: \"Failed to save configuration.\"\n                });\n                throw e;\n            } finally {\n                this.isLoading = false;\n            }\n        }\n    }\n});\n","import template from './sw-settings-credova-list.html.twig';\nimport '../../components/sw-settings-curbstone-form/index';\nimport './sw-settings-curbstone-list.scss';\n\nconst {Component, Mixin} = Shopware;\n\nComponent.register('sw-settings-curbstone-list', {\n    template,\n    mixins: [Mixin.getByName('notification')],\n    data() {\n        return {isSaving: false};\n    },\n\n    methods: {\n        async onSave() {\n            this.isSaving = true;\n            try {\n                await this.$refs.form.saveConfig();\n            } finally {\n                this.isSaving = false;\n            }\n        },\n    }\n});\n","import './page/sw-settings-curbstone-list'\nconst {Module} = Shopware\n\nModule.register('sw-settings-curbstone', {\n    type: 'plugin',\n    name: 'Curbstone',\n    description: 'Curbstone',\n    version: '1.0.0',\n    targetVersion: '1.0.0',\n    icon: 'regular-cog',\n    routes: {\n        index: {\n            component: 'sw-settings-curbstone-list',\n            path: 'index',\n        }\n    },\n    settingsItem: {\n        group: 'curbstone',\n        to: 'sw.settings.curbstone.index',\n        icon: 'regular-credit-card',\n        label: 'curbstone'\n    }\n});"],"names":["template$1","template","Component","Mixin","salesChannelId","values","Module"],"mappings":"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"}