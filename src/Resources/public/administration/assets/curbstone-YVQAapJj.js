const t=`<sw-page headerBorderColor="#9AA8B5"> <template #smart-bar-header> <div class="sw-page__smart-bar-header"> <h2>{{ $tc('Curbstone settings') }}</h2> <mt-icon name="regular-chevron-right-xs" size="12px" /> <h2>{{ $tc('Curbstone') }}</h2> </div> </template> <template #smart-bar-actions> <sw-button :disabled="$refs.curbstoneForm && $refs.curbstoneForm.isLoading" :loading="$refs.curbstoneForm && $refs.curbstoneForm.isLoading" @click="onSave" variant="secondary" > {{ $tc('Save Configs') }} </sw-button> </template> <template #content> <sw-settings-curbstone-form ref="form" @saved="onSaved"/> </template> </sw-page>`,o=`<div class="sw-settings-curbstone-form"> <mt-card style="margin-top: 20px;" title="Sales channel"> <sw-sales-channel-switch ref="salesChannelSwitch" :sales-channel-id="salesChannelId" label="Select sales channel" @change-sales-channel-id="onSalesChannelChanged" /> </mt-card> <mt-card :isLoading="isLoading" title="Configuration"> <div class="grid grid-cols-1 gap-20"> <sw-switch-field label="Sandbox mode" help-text="Use Curbstone sandbox endpoints (c3sbx.net). Switch off for production (c3dsi.net)." v-model:value="form['Curbstone.config.sandbox']" /> <sw-single-select label="Checkout Integration" help-text="" v-model:value="form['Curbstone.config.checkoutIntegration']" :options="checkoutIntegrationOptions" placeholder="DSI" /> <sw-text-field label="Merchant DSI Key (MFDSIK)" v-model:value="form['Curbstone.config.dsiKey']" :maxlength="256" placeholder="Your Curbstone MFDSIK" /> <sw-text-field label="Customer ID (MFCUST)" v-model:value="form['Curbstone.config.customerId']" :maxlength="64" placeholder="Your Curbstone MFCUST" /> <sw-text-field label="Merchant Code (MFMRCH)" v-model:value="form['Curbstone.config.merchantCode']" :maxlength="64" placeholder="Your Curbstone MFMRCH" /> </div> </mt-card> </div>`,{Component:n,Mixin:s}=Shopware;n.register("sw-settings-curbstone-form",{template:o,inject:["systemConfigApiService"],mixins:[s.getByName("notification")],data(){return{isLoading:!1,salesChannelId:null,form:{"Curbstone.config.enabled":!1,"Curbstone.config.sandbox":!0,"Curbstone.config.dsiKey":"","Curbstone.config.customerId":"","Curbstone.config.merchantCode":"","Curbstone.config.authCaptureFlow":"auth_only","Curbstone.config.plpMode":"embedded","Curbstone.config.requireCaptcha":!0,"Curbstone.config.checkoutIntegration":"plp"}}},computed:{configDomain(){return"Curbstone.config"},authFlowOptions(){return[{value:"auth_only",label:"Auth only"},{value:"auth_capture",label:"Auth & Capture"}]},plpModeOptions(){return[{value:"embedded",label:"Embedded (iFrame)"},{value:"redirect",label:"Redirect (full page)"}]},checkoutIntegrationOptions(){return[{value:"plp",label:"PLP"},{value:"dsi",label:"DSI"}]}},created(){this.salesChannelId=null,this.loadConfig()},methods:{async onSalesChannelChanged(e){this.salesChannelId=e||null,await this.loadConfig()},async loadConfig(){this.isLoading=!0;try{const e=await this.systemConfigApiService.getValues(this.configDomain,this.salesChannelId);this.form["Curbstone.config.enabled"]=e["Curbstone.config.enabled"]??!1,this.form["Curbstone.config.sandbox"]=e["Curbstone.config.sandbox"]??!0,this.form["Curbstone.config.dsiKey"]=e["Curbstone.config.dsiKey"]??"",this.form["Curbstone.config.customerId"]=e["Curbstone.config.customerId"]??"",this.form["Curbstone.config.merchantCode"]=e["Curbstone.config.merchantCode"]??"",this.form["Curbstone.config.authCaptureFlow"]=e["Curbstone.config.authCaptureFlow"]??"auth_only",this.form["Curbstone.config.plpMode"]=e["Curbstone.config.plpMode"]??"embedded",this.form["Curbstone.config.requireCaptcha"]=e["Curbstone.config.requireCaptcha"]??!0,this.form["Curbstone.config.checkoutIntegration"]=e["Curbstone.config.checkoutIntegration"]??"plp"}catch{this.createNotificationError({title:"Curbstone",message:"Failed to load configuration."})}finally{this.isLoading=!1}},async saveConfig(){if(this.isLoading)return!1;this.isLoading=!0;try{return await this.systemConfigApiService.saveValues({"Curbstone.config.enabled":this.form["Curbstone.config.enabled"],"Curbstone.config.sandbox":this.form["Curbstone.config.sandbox"],"Curbstone.config.dsiKey":this.form["Curbstone.config.dsiKey"],"Curbstone.config.customerId":this.form["Curbstone.config.customerId"],"Curbstone.config.merchantCode":this.form["Curbstone.config.merchantCode"],"Curbstone.config.authCaptureFlow":this.form["Curbstone.config.authCaptureFlow"],"Curbstone.config.plpMode":this.form["Curbstone.config.plpMode"],"Curbstone.config.requireCaptcha":this.form["Curbstone.config.requireCaptcha"],"Curbstone.config.checkoutIntegration":this.form["Curbstone.config.checkoutIntegration"]},this.salesChannelId),this.createNotificationSuccess({title:"Curbstone",message:"Configuration saved."}),!0}catch(e){throw this.createNotificationError({title:"Curbstone",message:"Failed to save configuration."}),e}finally{this.isLoading=!1}}}});const{Component:i,Mixin:r}=Shopware;i.register("sw-settings-curbstone-list",{template:t,mixins:[r.getByName("notification")],data(){return{isSaving:!1}},methods:{async onSave(){this.isSaving=!0;try{await this.$refs.form.saveConfig()}finally{this.isSaving=!1}}}});const{Module:a}=Shopware;a.register("sw-settings-curbstone",{type:"plugin",name:"Curbstone",description:"Curbstone",version:"1.0.0",targetVersion:"1.0.0",icon:"regular-cog",routes:{index:{component:"sw-settings-curbstone-list",path:"index"}},settingsItem:{group:"curbstone",to:"sw.settings.curbstone.index",icon:"regular-credit-card",label:"curbstone"}});
//# sourceMappingURL=curbstone-YVQAapJj.js.map
